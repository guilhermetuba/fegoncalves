<!DOCTYPE html>
<html>
<head>
    <title>Cadastro de Clientes</title>
    <script>
        // Armazenar CPFs cadastrados
        const cpfsCadastrados = [];

        function validarCPF(cpf) {
            // Remover caracteres não numéricos
            cpf = cpf.replace(/\D/g, '');

            // Validar comprimento do CPF (11 dígitos)
            if (cpf.length !== 11) {
                alert('CPF inválido. Deve conter 11 dígitos.');
                return false;
            }

            // Validar dígitos verificadores
            let soma = 0;
            let resto;

            for (let i = 1; i <= 9; i++) soma += parseInt(cpf.substring(i-1, i)) * (11 - i);
            resto = (soma * 10) % 11;

            if ((resto == 10) || (resto == 11)) resto = 0;
            if (resto != parseInt(cpf.substring(9, 10))) return false;

            soma = 0;
            for (let i = 1; i <= 10; i++) soma += parseInt(cpf.substring(i-1, i)) * (12 - i);
            resto = (soma * 10) % 11;

            if ((resto == 10) || (resto == 11)) resto = 0;
            if (resto != parseInt(cpf.substring(10, 11))) return false;

            // Verificar duplicidade de CPF
            if (cpfsCadastrados.includes(cpf)) {
                alert('CPF já cadastrado.');
                return false;
            }

            // Adicionar CPF à lista de cadastrados se válido
            cpfsCadastrados.push(cpf);
            return true;
        }

        function validarFormulario(event) {
            const cpf = document.getElementById('cpf').value;
            if (!validarCPF(cpf)) {
                alert('CPF inválido.');
                event.preventDefault();  // Prevenir envio do formulário
            }
        }
    </script>
</head>
<body>
    <h1>Cadastro de Clientes</h1>
    <form onsubmit="validarFormulario(event)">
        <label for="nome">Nome (obrigatório):</label><br>
        <input type="text" id="nome" name="nome" required><br><br>
        
        <label for="cpf">CPF (obrigatório):</label><br>
        <input type="text" id="cpf" name="cpf" required><br><br>

        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email"><br><br>

        <label for="telefone">Telefone:</label><br>
        <input type="tel" id="telefone" name="telefone"><br><br>

        <label for="endereco">Endereço:</label><br>
        <input type="text" id="endereco" name="endereco"><br><br>

        <label for="observacoes">Observações:</label><br>
        <textarea id="observacoes" name="observacoes"></textarea><br><br>

        <input type="submit" value="Enviar">
    </form>
</body>
</html>

